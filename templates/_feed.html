<!-- feed -->
<link rel="stylesheet" href="/static/styles/_feed.css">

<div class="container-main">
    <div class="container-feed">
        <div class="feed">
            {% if not posts %}
            <p>Nothing here...</p>
            {% else %}
            <ul class="list">
                {% for post in posts %}
                <li>
                    <div class="post-card">
                        <div class="user_profile">
                            <div class="pfp">
                                <a href="/user/{{ post.user.user_id }}"><img class="user_picture"
                                        src="{% if post.user.profile_pic %}{{ post.user.profile_pic }}{% else %}{{url_for('static', filename='images/default_pfp.png')}}{% endif %}"
                                        alt="pfp"></a>
                            </div>
                            <div class="user_info">
                                <a class="username" href="/user/{{ post.user.user_id }}">
                                    <p class="username" id="user">{{ post.user.username }}</p>
                                </a>
                                <p class="checked">checked into <a class="location" href="/StBarhops">St. Barhops</a>
                                </p>
                                <div class="rating">
                                    <img src="/static/images/filled-star.png" alt="star" width="20" height="20">
                                    <img src="/static/images/filled-star.png" alt="star" width="20" height="20">
                                    <img src="/static/images/filled-star.png" alt="star" width="20" height="20">
                                    <img src="/static/images/filled-star.png" alt="star" width="20" height="20">
                                    <img src="/static/images/filled-star.png" alt="star" width="20" height="20">
                                </div>
                            </div>
                            {% if post.user_id == g.user.user_id %}
                            <div class="settings-container">
                                <!-- options to edit or delete -->
                                <img src="/static/images/setting_icon.png" id="{{ post.post_id }}" for="settings"
                                    alt="Settings" class="settings-icon" width="25" height="25">
                                <div class="settings-options" for="so{{ post.post_id }}">
                                    <a href="/feed/edit/{{ post.post_id }}" class="settings-option">Edit</a>
                                    <a href="/feed/delete/{{ post.post_id }}" class="settings-option">Delete</a>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                        <div class="post_title">
                            <a class="title" href="/feed/{{ post.post_id }}">
                                <h1 class="title" id="title">{{ post.title }}</h1>
                            </a>
                        </div>
                        {% if post.content %}
                        <div class="content">
                            <p id="content">"{{ post.content }}"</p>
                        </div>
                        {% endif %}
                        {% if post.file %}
                        <div>
                            <img class="image" src="{{ post.file }}" alt="post_image">
                        </div>
                        {% endif %}
                        {% if post.event %}
                        <div class="event">
                            <p>From the {{ post.from_date.split("-")[2] }}th to the {{ post.to_date.split("-")[2] }}th</p>
                        </div>
                        {% endif %}
                        <div class="post-card-container">
                            <div class="date">
                                <p>2 days ago</p>
                            </div>
                            <!-- comments -->
                            <a href="/feed/{{ post.post_id }}">
                                <div class="comments">
                                    <img class="comment_icon" src="/static/images/comment_icon.png" alt="comment">
                                    <p class="comment">0 comments</p>
                                </div>
                            </a>
                            <!-- like button, dont even ask bruh -->
                            <div class="like">
                                <p class="likes" id="{{ post.post_id }}t">{{ post.likes }} Likes</p>
                                <a for="like" id="{{ post.post_id }}"><img class="like_icon" id="{{ post.post_id }}img"
                                        {% set like_icon={'src': 'src=/static/images/likeButton_default.png' } %} {% for
                                        like in likes if like.post_id==post.post_id and like.user_id==g.user.user_id %}
                                        {% if like.like_type==1 %} {% set
                                        _=like_icon.update({'src': 'src=/static/images/likeButton_red.png' }) %} {% elif
                                        like.like_type==-1 %} {% set
                                        _=like_icon.update({'src': 'src=/static/images/likeButton_grey.png' }) %} {%
                                        endif %} {% endfor %} {{ like_icon.src }}></a>
                            </div>
                        </div>
                    </div>
                </li>
                {% endfor %}
            </ul>
            {% endif %}
        </div>
    </div>
    <div class="container-sidebar">
        {% include 'sidebar.html' %}
    </div>
</div>

<script src="/static/javascript/feed_func.js"></script>